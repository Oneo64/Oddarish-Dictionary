<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title id="title">Orðpængin um Oddarsku</title>
	<link rel="stylesheet" href="style.css">
	<link rel="icon" type="image/x-icon" href="images/favicon.png">
</head>
<body>
<div class="body">
	<span class="titlespan"><img class="h1favicon" src="images/favicon.png" alt="favicon"><h1><a href="index.html">Orðpængin um Oddarsku</a></h1></span>
	<div id="letters" class="letterlist h2font"></div>
	<hr>
	<h3 id="letter">A</h2>
	<div id="words" class="list pfont"></div>
	<p>Þetta tungaleiði ar setið með <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</p>
</div>

<script src="js/letters.js"></script>
<script src="js/oddarish_dictionary.js"></script>
<script>
	var query = window.location.search;
	var params = new URLSearchParams(query);
	var v = params.get("v");

	document.getElementById("title").innerHTML = "Orðpængin um Oddarsku - " + v.toUpperCase() + " Orður";
	document.getElementById("letter").innerHTML = "Runan " + v.toUpperCase();

	var list = [];

	if (v) {
		for (var i = 0; i < entry_words.length; i++) {
			if (entry_words[i].startsWith(v) || entry_words[i].startsWith("-" + v)) list.push(entry_words[i]);
		}

		list.sort(function(a, b) {
			function normalize(str) {
				return str
					.replace(/a/g, "á~")
					.replace(/d/g, "ð~")
					.replace(/e/g, "é~")
					.replace(/i/g, "í~")
					.replace(/o/g, "ó~")
					.replace(/u/g, "ú~")
					.replace(/y/g, "ý~")
					.replace(/æ/g, "z~")
					.replace(/ö/g, "þ~");
			}

			return normalize(a).localeCompare(normalize(b));
		});

		for (var i = 0; i < list.length; i++) {
			document.getElementById("words").innerHTML += "<a class='listitem' href='word.html?v=" + list[i] + "'>" + list[i] + "</a>";
		}
	}

	document.getElementById("letter").innerHTML += " (" + list.length + ")"

	function onWindowResize() {
		var details = navigator.userAgent;
		var regexp = /android|iphone/i;
		var columns = 4;

		if (regexp.test(details) || window.innerWidth < 500) columns = 3;

		document.documentElement.style.setProperty(
			"--words-per-column",
			Math.ceil(document.getElementById("words").children.length / columns)
		);
	}

	window.onresize = onWindowResize;
	onWindowResize();
</script>
</body>
</html>