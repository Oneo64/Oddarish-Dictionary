<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title id="title">Online Oddarish Dictionary</title>
	<link rel="stylesheet" href="style.css">
	<link rel="icon" type="image/x-icon" href="images/favicon.png">
</head>
<body>
<div class="body">
	<span class="titlespan"><img class="h1favicon" src="images/favicon.png" alt="favicon"><h1><a href="index.html">Online Oddarish Dictionary</a></h1></span>
	<div id="letters" class="letterlist h2font"></div>
	<hr>
	<h3 id="letter">A</h3>
	<div id="words" class="list pfont"></div>
	<p>This language and website is published under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</p>
</div>

<script src="js/letters.js"></script>
<script src="js/oddarish_dictionary.js"></script>
<script>
	var query = window.location.search;
	var params = new URLSearchParams(query);
	var v = params.get("v");

	document.getElementById("title").innerHTML = "Online Oddarish Dictionary - " + v.toUpperCase();
	document.getElementById("letter").innerHTML = "Letter " + v.toUpperCase();

	var hyphenless = document.cookie == null || !document.cookie.includes("hyphens-true");

	var list = [];

	if (v) {
		for (var i = 0; i < entry_words.length; i++) {
			var word = entry_words[i].toLowerCase();

			if (word.startsWith(v) || word.startsWith("-" + v)) list.push(entry_words[i]);
		}

		var order = "aábdðeéfghiíjklmnoóprstuúvxyýzþæö";
		var orderMap = new Map(order.split("").map((x, i) => [x, i]));

		list.sort((a, b) => {
			var len = Math.max(a.length, b.length);

			for (var i = 0; i < len; i++) {
				var a2 = orderMap.get(a[i]) ?? Infinity;
				var b2 = orderMap.get(b[i]) ?? Infinity;

				if (a2 == Infinity) return b2 - a2;
				if (a2 != b2) return a2 - b2;
			}

			return a.length - b.length;
		});

		for (var i = 0; i < list.length; i++) {
			var display_word = list[i];

			if (hyphenless) display_word = display_word.replaceAll("-", "");

			document.getElementById("words").innerHTML += "<a class='listitem' href='word.html?v=" + list[i] + "'>" + display_word + "</a>";
		}
	}

	document.getElementById("letter").innerHTML += " (" + list.length + ")"

	function onWindowResize() {
		var details = navigator.userAgent;
		var regexp = /android|iphone/i;
		var columns = 4;

		if (regexp.test(details) || window.innerWidth < 500) columns = 3;

		document.documentElement.style.setProperty(
			"--words-per-column",
			Math.ceil(document.getElementById("words").children.length / columns)
		);
	}

	window.onresize = onWindowResize;
	onWindowResize();
</script>
</body>
</html>