<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title id="title">Orðpæng um Oddarsku</title>
	<link rel="stylesheet" href="style.css">
	<link rel="icon" type="image/x-icon" href="images/favicon.png">
</head>
<body>
<div class="body">
	<span class="titlespan"><img class="h1favicon" src="images/favicon.png" alt="favicon"><h1><a href="index.html">Orðpængin um Oddarsku</a></h1></span>
	<div id="letters" class="letterlist h2font"></div>
	<hr>
	<h3 id="word">Orðinn ar eigi fyndið</h2>
	<p id="type">n/a</p>
	<p id="definition">Þelsmúin, þetta orð býr eigi í Oddarska!</p>

	<table id="noun" class="pfont table" hidden><tbody>
		<tr> <th id="gender" rowspan="2">eigeinligr</th> <th colspan="2">einhlett</th> <th colspan="2">mákarhlett</th> </tr>
		<tr> <th>óþærbúandi</th> <th>þærbúandi</th> <th>óþærbúandi</th> <th>þærbúandi</th> </tr>
		<tr> <th>fráorð</th> <td id="n0"></td> <td id="n1"></td> <td id="n2"></td> <td id="n3"></td> </tr>
		<tr> <th>tilorð</th> <td id="n4"></td> <td id="n5"></td> <td id="n6"></td> <td id="n7"></td> </tr>
		<tr> <th>etirorð</th> <td id="n8"></td> <td id="n9"></td> <td id="n10"></td> <td id="n11"></td> </tr>
		<tr> <th>ekkinorð</th> <td id="n12"></td> <td id="n13"></td> <td id="n14"></td> <td id="n15"></td> </tr>
	</tbody></table>
</div>

<script src="js/letters.js"></script>
<script src="js/oddarish_dictionary.js"></script>
<script src="js/declensions.js"></script>
<script>
	var query = window.location.search;
	var params = new URLSearchParams(query);
	var v = params.get("v");

	if (v in entries) {
		document.getElementById("title").innerHTML = "Orðpængin um Oddarsku - " + v.charAt(0).toUpperCase() + v.substring(1);
		document.getElementById("word").innerHTML = v;

		var entry = entries[v];

		document.getElementById("type").innerHTML = word_type_short_form[entry[0]];
		document.getElementById("definition").innerHTML = entry[1];

		if (entry[1].includes("|")) {
			document.getElementById("definition").innerHTML = entry[1].substring(0, entry[1].indexOf("|")).trim();
		}

		var declension = [];

		if (entry[0].includes("noun")) {
			document.getElementById("noun").hidden = false;

			if (entry[0] == "masculine noun") {
				document.getElementById("gender").innerHTML = "mandligr";

				if (v.endsWith("dr")) {
					for (var i = 0; i < 16; i++) {
						if (noun_declensions.masculine_dr[i] == "") {
							declension.push(v);
						} else {
							declension.push(v + noun_declensions.masculine_dr[i]);
						}
					}
				} else if (v.endsWith("r")) {
					for (var i = 0; i < 16; i++) {
						if (noun_declensions.masculine_r[i] == "") {
							declension.push(v);
						} else {
							declension.push(v.substring(0, v.length - 1) + noun_declensions.masculine_r[i]);
						}
					}
				} else if (v.endsWith("i")) {
					for (var i = 0; i < 16; i++) {
						if (noun_declensions.masculine_i[i] == "") {
							declension.push(v);
						} else {
							declension.push(v.substring(0, v.length - 1) + noun_declensions.masculine_i[i]);
						}
					}
				} else {
					for (var i = 0; i < 16; i++) {
						if (noun_declensions.masculine[i] == "") {
							declension.push(v);
						} else {
							declension.push(v.substring(0, v.length - 1) + noun_declensions.masculine[i]);
						}
					}
				}
			} else if (entry[0] == "feminine noun") {
				document.getElementById("gender").innerHTML = "kónligr";

				if (v.endsWith("ja")) {
					for (var i = 0; i < 16; i++) {
						if (noun_declensions.feminine_ja[i] == "") {
							declension.push(v);
						} else {
							declension.push(v.substring(0, v.length - 1) + noun_declensions.feminine_ja[i]);
						}
					}
				} else if (v.endsWith("a")) {
					for (var i = 0; i < 16; i++) {
						if (noun_declensions.feminine_a[i] == "") {
							declension.push(v);
						} else {
							declension.push(v.substring(0, v.length - 1) + noun_declensions.feminine_a[i]);
						}
					}
				} else if (v.endsWith("ei")) {
					for (var i = 0; i < 16; i++) {
						if (noun_declensions.feminine_ei[i] == "") {
							declension.push(v);
						} else {
							declension.push(v + noun_declensions.feminine_ei[i]);
						}
					}
				} else {
					for (var i = 0; i < 16; i++) {
						if (noun_declensions.feminine[i] == "") {
							declension.push(v);
						} else {
							declension.push(v.substring(0, v.length - 1) + noun_declensions.feminine[i]);
						}
					}
				}
			} else if (v.endsWith("i")) {
				for (var i = 0; i < 16; i++) {
					if (noun_declensions.neuter[i] == "") {
						declension.push(v);
					} else {
						declension.push(v.substring(0, v.length - 1) + noun_declensions.neuter[i]);
					}
				}
			} else {
				for (var i = 0; i < 16; i++) {
					if (noun_declensions.neuter[i] == "") {
						declension.push(v);
					} else {
						declension.push(v + noun_declensions.neuter[i]);
					}
				}
			}

			for (var i = 0; i < 16; i++) {
				document.getElementById("n" + i).innerHTML = declension[i];
			}
		}
	}
</script>
</body>
</html>